<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noindex, nofollow">
    <title>Password Protected Page</title>
    <style>
        html, body {
            margin: 0;
            width: 100%;
            height: 100%;
            font-family: Arial, Helvetica, sans-serif;
        }
        #dialogText {
            color: white;
            background-color: #333333;
        }
        
        #dialogWrap {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: table;
            background-color: #EEEEEE;
        }
        
        #dialogWrapCell {
            display: table-cell;
            text-align: center;
            vertical-align: middle;
        }
        
        #mainDialog {
            max-width: 400px;
            margin: 5px;
            border: solid #AAAAAA 1px;
            border-radius: 10px;
            box-shadow: 3px 3px 5px 3px #AAAAAA;
            margin-left: auto;
            margin-right: auto;
            background-color: #FFFFFF;
            overflow: hidden;
            text-align: left;
        }
        #mainDialog > * {
            padding: 10px 30px;
        }
        #passArea {
            padding: 20px 30px;
            background-color: white;
        }
        #passArea > * {
            margin: 5px auto;
        }
        #pass {
            width: 100%;
            height: 40px;
            font-size: 30px;
        }
        
        #messageWrapper {
            float: left;
            vertical-align: middle;
            line-height: 30px;
        }
        
        .notifyText {
            display: none;
        }
        
        #invalidPass {
            color: red;
        }
        
        #success {
            color: green;
        }
        
        #submitPass {
            font-size: 20px;
            border-radius: 5px;
            background-color: #E7E7E7;
            border: solid gray 1px;
            float: right;
            cursor: pointer;
        }
        #contentFrame {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        #attribution {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            text-align: center;
            padding: 10px;
            font-weight: bold;
            font-size: 0.8em;
        }
        #attribution, #attribution a {
            color: #999;
        }
        .error {
            display: none;
            color: red;
        }
    </style>
  </head>
  <body>
    <iframe id="contentFrame" frameBorder="0" allowfullscreen></iframe>
    <div id="dialogWrap">
        <div id="dialogWrapCell">
            <div id="mainDialog">
                <div id="dialogText">This page is password protected.</div>
                <div id="passArea">
                    <p id="passwordPrompt">Password</p>
                    <input id="pass" type="password" name="pass" autofocus>
                    <div>
                        <span id="messageWrapper">
                            <span id="invalidPass" class="error">Sorry, please try again.</span>
                            <span id="trycatcherror" class="error">Sorry, something went wrong.</span>
                            <span id="success" class="notifyText">Success!</span>
                            &nbsp;
                        </span>
                        <button id="submitPass" type="button">Submit</button>
                        <div style="clear: both;"></div>
                    </div>
                </div>
                <div id="securecontext" class="error">
                    <p>
                        Sorry, but password protection only works over a secure connection. Please load this page via HTTPS.
                    </p>
                </div>
                <div id="nocrypto" class="error">
                    <p>
                        Your web browser appears to be outdated. Please visit this page using a modern browser.
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div id="attribution">
       
    </div>
    <script>
    (function() {

        var pl = "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";
        
        var submitPass = document.getElementById('submitPass');
        var passEl = document.getElementById('pass');
        var invalidPassEl = document.getElementById('invalidPass');
        var trycatcherror = document.getElementById('trycatcherror');
        var successEl = document.getElementById('success');
        var contentFrame = document.getElementById('contentFrame');
        
        // Sanity checks

        if (pl === "") {
            submitPass.disabled = true;
            passEl.disabled = true;
            alert("This page is meant to be used with the encryption tool. It doesn't work standalone.");
            return;
        }

        if (!isSecureContext) {
            document.querySelector("#passArea").style.display = "none";
            document.querySelector("#securecontext").style.display = "block";
            return;
        }

        if (!crypto.subtle) {
            document.querySelector("#passArea").style.display = "none";
            document.querySelector("#nocrypto").style.display = "block";
            return;
        }
        
        function str2ab(str) {
            var ustr = atob(str);
            var buf = new ArrayBuffer(ustr.length);
            var bufView = new Uint8Array(buf);
            for (var i=0, strLen=ustr.length; i < strLen; i++) {
                bufView[i] = ustr.charCodeAt(i);
            }
            return bufView;
        }

        async function deriveKey(salt, password) {
            const encoder = new TextEncoder()
            const baseKey = await crypto.subtle.importKey(
                'raw',
                encoder.encode(password),
                'PBKDF2',
                false,
                ['deriveKey'],
            )
            return await crypto.subtle.deriveKey(
                { name: 'PBKDF2', salt, iterations: 100000, hash: 'SHA-256' },
                baseKey,
                { name: 'AES-GCM', length: 256 },
                true,
                ['decrypt'],
            )
        }
        
        async function doSubmit(evt) {
            submitPass.disabled = true;
            passEl.disabled = true;

            let iv, ciphertext, key;
            
            try {
                var unencodedPl = str2ab(pl);

                const salt = unencodedPl.slice(0, 32)
                iv = unencodedPl.slice(32, 32 + 16)
                ciphertext = unencodedPl.slice(32 + 16)

                key = await deriveKey(salt, passEl.value);
            } catch (e) {
                trycatcherror.style.display = "inline";
                console.error(e);
                return;
            }

            try {
                const decryptedArray = new Uint8Array(
                    await crypto.subtle.decrypt({ name: 'AES-GCM', iv }, key, ciphertext)
                );

                let decrypted = new TextDecoder().decode(decryptedArray);

                if (decrypted === "") throw "No data returned";

                const basestr = '<base href="." target="_top">';
                const anchorfixstr = `
                    <script>
                        Array.from(document.links).forEach((anchor) => {
                            const href = anchor.getAttribute("href");
                            if (href.startsWith("#")) {
                                anchor.addEventListener("click", function(e) {
                                    e.preventDefault();
                                    const targetId = this.getAttribute("href").substring(1);
                                    const targetEl = document.getElementById(targetId);
                                    targetEl.scrollIntoView();
                                });
                            }
                        });
                    <\/script>
                `;
                
                // Set default iframe link targets to _top so all links break out of the iframe
                if (decrypted.includes("<head>")) decrypted = decrypted.replace("<head>", "<head>" + basestr);
                else if (decrypted.includes("<!DOCTYPE html>")) decrypted = decrypted.replace("<!DOCTYPE html>", "<!DOCTYPE html>" + basestr);
                else decrypted = basestr + decrypted;

                // Fix fragment links
                if (decrypted.includes("</body>")) decrypted = decrypted.replace("</body>", anchorfixstr + '</body>');
                else if (decrypted.includes("</html>")) decrypted = decrypted.replace("</html>", anchorfixstr + '</html>');
                else decrypted = decrypted + anchorfixstr;
                
                contentFrame.srcdoc = decrypted;
                
                successEl.style.display = "inline";
                setTimeout(function() {
                    dialogWrap.style.display = "none";
                }, 1000);
            } catch (e) {
                invalidPassEl.style.display = "inline";
                passEl.value = "";
                submitPass.disabled = false;
                passEl.disabled = false;
                console.error(e);
                return;
            }
        }
        
        submitPass.onclick = doSubmit;
        passEl.onkeypress = function(e){
            if (!e) e = window.event;
            var keyCode = e.keyCode || e.which;
            invalidPassEl.style.display = "none";
            if (keyCode == '13'){
              // Enter pressed
              doSubmit();
              return false;
            }
        }
    })();
    </script>
  </body>
</html>
